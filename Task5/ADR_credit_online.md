### **Название задачи: ADR-3. ** Интеграция онлайн-подачи заявок на кредит в цифровые каналы банка
### **Автор:** Гармаш Вячеслав Борисович
### **Дата:** 2025-10-25

### **Функциональные требования**

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
| 1 | Клиент, Сайт, Кредитный конвейер | Подача заявки на кредит через сайт | 1. Новый клиент заполняет заявку на сайте (ФИО, телефон, паспорт).<br>2. Система отправляет данные в скоринг.<br>3. Клиент получает предварительное решение.<br>4. Заявка передается в Кредитный конвейер.<br>5. Клиент получает SMS о необходимости посещения отделения. |
| 2 | Клиент, Интернет-банк, Кредитный конвейер | Подача заявки на кредит через ИБ | 1. Авторизованный клиент видит предодобренные предложения.<br>2. Клиент заполняет заявку с подтверждением по SMS.<br>3. Система проводит упрощенный скоринг.<br>4. Заявка передается в Кредитный конвейер для обработки. |
| 3 | Менеджер отделения, АБС, Кредитный конвейер | Продолжение обработки заявки в отделении | 1. Менеджер видит заявку из цифровых каналов.<br>2. Продолжает обработку с клиентом.<br>3. Для новых клиентов создает новую заявку. |
| 4 | Система скоринга, АБС, БКИ | Скоринг клиента | 1. Система получает данные клиента.<br>2. Запрашивает данные из БКИ для новых клиентов.<br>3. Рассчитывает кредитный рейтинг.<br>4. Возвращает решение системе-инициатору. |

### **Нефункциональные требования**

|**№**|**Требование**|
| :-: | :- |
| 1 | **Производительность**: Обработка заявок по предодобренным предложениям в течение рабочего дня |
| 2 | **Масштабируемость**: Кредитный конвейер и система скоринга должны поддерживать горизонтальное масштабирование |
| 3 | **Надежность**: Все сервисы должны работать 24/7 с доступностью 99.9% |
| 4 | **Безопасность**: Передача персональных данных должна быть защищена TLS |
| 5 | **Производительность**: Система скоринга не должна быть перегружена дополнительными процессами предрасчетов |
| 6 | **Совместимость**: Использование существующих технологий банка (Java, Spring Boot, Camunda) |

### **Решение**
#### Архитектурно значимые решения:

1. **Использование существующего Кредитного конвейера** как центрального оркестратора процесса для минимизации изменений в устоявшихся процессах
2. **Создание отдельного Credit Service** для изоляции новой функциональности от существующих систем и соблюдения принципа единой ответственности
3. **Асинхронная интеграция** через REST API для защиты системы скоринга от перегрузки и обеспечения отказоустойчивости
4. **Разделение потоков обработки** для новых и существующих клиентов с учетом разных требований к идентификации и скорингу
5. **Использование Java Spring Boot** для новых сервисов в соответствии с существующей экспертизой команды АБС 


### Альтернативы
#### Альтернатива 1: Прямая интеграция с АБС
Описание: Прямое создание заявок в АБС из цифровых каналов через API

**Недостатки:**
1. Нарушает требование изоляции АБС от интернет-нагрузки
1. Ограниченная функциональность API АБС
1. Высокий риск влияния на основную банковскую систему

#### Альтернатива 2: Полностью независимая система
Описание: Создание полностью автономной системы кредитования без интеграции с существующими системами

**Недостатки:**

1. Дублирование функциональности
1. Проблемы с консистентностью данных
1. Высокие затраты на разработку и поддержку

#### Альтернатива 3: Расширение депозитного сервиса
Описание: Добавление кредитной функциональности в существующий Deposit Service

**Недостатки:**

1. Нарушение принципа единой ответственности
1. Усложнение архитектуры сервиса
1. Потенциальные конфликты приоритетов разработки

### Ограничения решения
#### Технические ограничения
1. Производительность АБС: Необходимость асинхронной синхронизации из-за ограничений производительности АБС
1. Частота обновлений: Обмен данными с АБС происходит раз в сутки, что ограничивает скорость обработки заявок
1. Архитектура скоринга: Невозможность использования системы скоринга для предрасчетов из-за высокой нагрузки

#### Бизнес-ограничения
1. Идентификация клиентов: Новые клиенты должны проходить очную идентификацию в отделении
1. Сроки обработки: Обработка предодобренных заявок ограничена рабочим днем
1. Интеграция с партнерами: Зависимость от внешних систем (БКИ)

#### Архитектурные ограничения
1. Совместимость: Необходимость использования существующих технологий банка
1. Безопасность: Ограничения на передачу персональных данных между системами
1. Надежность: Требование 99.9% доступности для всех компонентов системы

#### Операционные ограничения
1. Масштабируемость: Вертикальное масштабирование АБС против горизонтального масштабирования новых сервисов
1. Мониторинг: Сложность отслеживания сквозных транзакций в распределенной системе
1. Восстановление: Необходимость согласованного восстановления при сбоях в цепочке обработки

Это решение обеспечивает постепенную интеграцию онлайн-кредитования с минимальным воздействием на существующие системы и соблюдением всех регуляторных требований.